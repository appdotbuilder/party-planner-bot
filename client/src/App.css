
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-white font-sans antialiased;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-text-size-adjust: 100%;
  }
  
  html {
    @apply scroll-smooth;
    height: 100%;
    height: -webkit-fill-available;
  }
  
  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  /* Enhanced focus styles for accessibility */
  button:focus-visible,
  input:focus-visible {
    @apply outline-none ring-2 ring-blue-900 ring-opacity-50;
  }
}

@layer components {
  /* Safe area handling for mobile devices with iOS notch support */
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }
  
  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }
  
  /* Enhanced scrollbar styling */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-1;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full hover:bg-gray-400;
  }
  
  /* Mobile-first touch interactions */
  .touch-feedback {
    @apply active:scale-95 transition-transform duration-150 ease-out;
  }
  
  .touch-feedback:active {
    transform: scale(0.95);
  }
  
  /* Enhanced mobile tap areas */
  .tap-area {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center touch-manipulation;
  }
  
  /* Message animations with mobile optimization */
  .message-enter {
    @apply opacity-0 transform translate-y-2;
    animation: messageSlideIn 0.3s ease-out forwards;
  }
  
  @keyframes messageSlideIn {
    to {
      @apply opacity-100 transform translate-y-0;
    }
  }
  
  /* Typewriter cursor animation */
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }
  
  .typewriter-cursor {
    animation: blink 1s infinite;
  }
  
  /* Enhanced typing indicator */
  .typing-indicator {
    @apply flex space-x-1;
  }
  
  .typing-dot {
    @apply w-2 h-2 bg-gray-400 rounded-full animate-bounce;
  }
  
  .typing-dot:nth-child(1) { animation-delay: 0ms; }
  .typing-dot:nth-child(2) { animation-delay: 150ms; }
  .typing-dot:nth-child(3) { animation-delay: 300ms; }
  
  /* Enhanced progress indicator with mobile focus */
  .progress-step {
    @apply transition-all duration-300 ease-in-out;
  }
  
  .progress-step.active {
    @apply scale-105 sm:scale-110;
  }
  
  .progress-step.completed {
    @apply text-blue-900;
  }
  
  /* Enhanced message bubbles with hover states */
  .message-bubble {
    @apply shadow-sm transition-all duration-200 hover:shadow-md;
  }
  
  .message-bubble-user {
    @apply bg-black text-white border-black shadow-sm;
  }
  
  .message-bubble-bot {
    @apply bg-gray-50 text-black border-gray-200 shadow-sm;
  }
  
  /* Enhanced input styling */
  .chat-input {
    @apply transition-all duration-200;
  }
  
  .chat-input:focus {
    @apply ring-2 ring-blue-900 ring-opacity-20 border-blue-900;
  }
  
  /* Mobile input optimization to prevent zoom */
  .mobile-input {
    font-size: 16px; /* Prevents zoom on iOS */
  }
  
  /* Loading states */
  .loading-spinner {
    @apply animate-spin;
    animation-duration: 1s;
  }
  
  .loading-pulse {
    @apply animate-pulse;
  }
  
  /* Enhanced button states */
  .button-primary {
    @apply bg-blue-900 hover:bg-blue-800 active:bg-blue-950 text-white transition-all duration-200;
  }
  
  .button-outline {
    @apply border-blue-900 text-blue-900 hover:bg-blue-900 hover:text-white transition-all duration-200;
  }
  
  /* Avatar enhancements */
  .avatar-user {
    @apply bg-gray-200 text-gray-700;
  }
  
  .avatar-bot {
    @apply bg-blue-900 text-white;
  }
  
  /* Media content styling */
  .rich-media-container {
    @apply mt-3 space-y-2 rounded-md overflow-hidden;
  }
  
  .rich-media-image {
    @apply w-full object-cover rounded-md transition-all duration-200 hover:scale-105;
  }
}

@layer utilities {
  /* Mobile-first touch utilities */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  .touch-pan-y {
    touch-action: pan-y;
  }
  
  .touch-pan-x {
    touch-action: pan-x;
  }
  
  /* Prevent zoom utilities */
  .prevent-zoom {
    font-size: 16px;
    transform-origin: center;
  }
  
  /* Smooth scrolling enhancements */
  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Performance optimizations */
  .gpu-accelerated {
    transform: translate3d(0, 0, 0);
    will-change: transform;
  }
  
  .backface-hidden {
    backface-visibility: hidden;
  }
  
  /* Enhanced contrast utilities */
  .high-contrast {
    @apply text-black bg-white;
  }
  
  .high-contrast-inverse {
    @apply text-white bg-black;
  }
  
  /* Responsive text utilities */
  .text-responsive {
    @apply text-sm sm:text-base lg:text-lg;
  }
  
  .text-responsive-small {
    @apply text-xs sm:text-sm;
  }
  
  /* Spacing utilities for responsive design */
  .spacing-responsive {
    @apply p-4 sm:p-5 lg:p-6;
  }
  
  .spacing-responsive-small {
    @apply p-2 sm:p-3 lg:p-4;
  }
  
  /* Interactive state utilities */
  .interactive-scale {
    @apply active:scale-95 transition-transform duration-150;
  }
  
  .interactive-opacity {
    @apply active:opacity-75 transition-opacity duration-150;
  }
  
  /* Focus utilities for better accessibility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-900 focus:ring-opacity-50;
  }
  
  /* Container utilities for different screen sizes */
  .container-mobile {
    @apply max-w-md mx-auto;
  }
  
  .container-tablet {
    @apply max-w-2xl mx-auto;
  }
  
  .container-desktop {
    @apply max-w-4xl mx-auto;
  }
}

/* ===== RESPONSIVE BREAKPOINTS ===== */

/* Mobile First - Base Styles (up to 640px) */
.mobile-optimized {
  @apply text-base leading-6;
  line-height: 1.6;
}

.mobile-header {
  @apply text-lg font-semibold;
}

.mobile-input {
  @apply text-base; /* Prevents zoom on iOS Safari */
  min-height: 44px; /* Apple's minimum touch target */
}

.mobile-button {
  @apply min-h-[44px] min-w-[44px] text-base font-medium;
  touch-action: manipulation;
}

/* Small screens and up (sm: 640px+) */
@media (min-width: 640px) {
  .container-responsive {
    @apply max-w-2xl;
  }
  
  .text-responsive-sm {
    @apply text-base;
  }
  
  .button-responsive-sm {
    @apply px-4 py-2 text-base;
  }
  
  .spacing-responsive-sm {
    @apply p-5;
  }
  
  /* Enhanced hover states for touch devices */
  .hover-enabled:hover {
    @apply bg-blue-900 text-white transform scale-105;
  }
}

/* Medium screens and up (md: 768px+) */
@media (min-width: 768px) {
  .container-responsive {
    @apply max-w-3xl;
  }
  
  .text-responsive-md {
    @apply text-lg;
  }
  
  .button-responsive-md {
    @apply px-5 py-2.5 text-base;
  }
  
  .spacing-responsive-md {
    @apply p-6;
  }
  
  /* Tablet-specific optimizations */
  .message-container-tablet {
    @apply max-w-[70%];
  }
  
  .chat-area-tablet {
    @apply px-8;
  }
}

/* Large screens and up (lg: 1024px+) */
@media (min-width: 1024px) {
  .container-responsive {
    @apply max-w-4xl;
  }
  
  .text-responsive-lg {
    @apply text-xl;
  }
  
  .button-responsive-lg {
    @apply px-6 py-3 text-lg;
  }
  
  .spacing-responsive-lg {
    @apply p-8;
  }
  
  /* Desktop-specific enhancements */
  .message-container-desktop {
    @apply max-w-[60%];
  }
  
  .chat-area-desktop {
    @apply px-12;
  }
  
  /* Enhanced hover effects for desktop */
  .desktop-hover:hover {
    @apply shadow-lg transform scale-102 transition-all duration-200;
  }
  
  .desktop-button-hover:hover {
    @apply shadow-md bg-blue-800;
  }
}

/* Extra large screens and up (xl: 1280px+) */
@media (min-width: 1280px) {
  .container-responsive {
    @apply max-w-5xl;
  }
  
  .text-responsive-xl {
    @apply text-2xl;
  }
  
  .spacing-responsive-xl {
    @apply p-10;
  }
  
  /* Ultra-wide desktop optimizations */
  .message-container-xl {
    @apply max-w-[50%];
  }
  
  .chat-area-xl {
    @apply px-16;
  }
}

/* ===== DEVICE-SPECIFIC OPTIMIZATIONS ===== */

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  .ios-fix {
    -webkit-appearance: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
  }
  
  .ios-input-fix {
    font-size: 16px !important; /* Prevents zoom */
    border-radius: 0; /* Removes default iOS styling */
  }
}

/* Android Chrome specific fixes */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .android-fix {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ===== ACCESSIBILITY & PREFERENCE SUPPORT ===== */

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .respect-motion-preference,
  .respect-motion-preference * {
    @apply transition-none animate-none;
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .high-contrast-mode {
    @apply border-2 border-black;
  }
  
  .high-contrast-button {
    @apply border-2 border-black bg-white text-black;
  }
  
  .high-contrast-button:hover {
    @apply bg-black text-white;
  }
}

/* Dark mode readiness (future enhancement) */
@media (prefers-color-scheme: dark) {
  .dark-mode-ready {
    @apply bg-gray-900 text-white;
  }
}

/* ===== PRINT STYLES ===== */
@media print {
  .no-print {
    display: none !important;
  }
  
  .print-optimized {
    @apply text-black bg-white;
    box-shadow: none !important;
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* Optimize animations for better performance */
.optimized-animation {
  transform: translate3d(0, 0, 0);
  will-change: transform, opacity;
}

/* Optimize scrolling performance */
.optimized-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
}
